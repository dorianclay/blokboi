import numpy as np
import json
from pathlib import Path
import argparse
import os


def main(**kwargs):
    demomap = [
        # fmt: off
        [['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['p', '3'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['P', 'R'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['y', '1'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['b', '6'],['g', '8'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['y', '3'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['r', '2'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['o', '9'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        # fmt: on
    ]

    stacking = [
        # fmt: off
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['p', '8'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['P', 'L'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['g', '5'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        [['@', 'X'],['@', 'X'],['@', 'X'],['@', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X'],['.', 'X']],
        # fmt: on
    ]

    obj_dict = [
        {
            "id": "demo",
            "objective": "Put the blue block on top of block 9.",
            "coordinates": [[7, 1], [14, 4]],
            "relationship": "on top",
        },
        {
            "id": "stacking1",
            "objective": "Put the purple block above red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "above",
        },
        {
            "id": "stacking2",
            "objective": "Put the purple block below the red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "below",
        },
        {
            "id": "stacking3",
            "objective": "Put the purple block under the red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "under",
        },
        {
            "id": "stacking4",
            "objective": "Put the purple block on top of the red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "on top",
        },
        {
            "id": "stacking5",
            "objective": "Put the purple block beneath the red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "beneath",
        },
        {
            "id": "stacking6",
            "objective": "Put the purple block to the right of the red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "right",
        },
        {
            "id": "stacking7",
            "objective": "Put the purple block to the left of the red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "left",
        },
        {
            "id": "stacking8",
            "objective": "Take the purple block off the red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "off",
        },
        {
            "id": "stacking9",
            "objective": "Put the purple block to the side of the red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "side",
        },
        {
            "id": "stacking10",
            "objective": "Put the purple block diagonal to the red block.",
            "coordinates": [[2, 4], [15, 4]],
            "relationship": "diagonal",
        },
    ]

    savedir = Path(kwargs["path"]) / "toy"

    if not os.path.exists(savedir):
        os.makedirs(savedir)

    with open(savedir / "scenes.json", "w") as file:
        json.dump(obj_dict, file)

    maps = [
        demomap,
        stacking,
        stacking,
        stacking,
        stacking,
        stacking,
        stacking,
        stacking,
        stacking,
        stacking,
        stacking,
    ]

    maparr = np.array(maps)
    np.save(savedir / "scenes.npy", maparr)


if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Generate the toy examples.")
    parser.add_argument(
        "--path",
        default="data",
        type=str,
        help="The location of the data directory (default: data).",
    )
    args = parser.parse_args()
    main(**vars(args))
